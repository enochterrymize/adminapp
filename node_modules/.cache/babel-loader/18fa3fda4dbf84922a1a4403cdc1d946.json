{"ast":null,"code":"import _slicedToArray from\"/Volumes/Terry HD/workspace/projects_reactjs/admin/endless-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from'react';import Breadcrumb from'../../common/breadcrumb';import logo from'../../../assets/images/endless-logo.png';import userDemoPic from'../../../assets/images/user/user.png';import useForm from'react-hook-form';import{editUser}from'../../../services/contact.service';import firebase from'../../../data/base';var NewUser=function NewUser(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;// initialise the hook\nvar db=firebase.firestore();var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),userId=_useState6[0],setUserId=_useState6[1];var id=props.match.params.id;useEffect(function(){setUserId(id);var isSubscribed=db.collection(\"contactApp\").doc(id).onSnapshot(function(doc){var user=doc.data();setData(user);setUrl(user.avatar);});return function(){return isSubscribed();};},[db,id]);var onSubmit=function onSubmit(data){if(data!==''){editUser(data,url,userId);props.history.push('/contact-app/contact');}else{errors.showMessages();}};var renderContact=function renderContact(){props.history.push('/contact-app/contact');};var readUrl=function readUrl(event){if(event.target.files.length===0)return;//Image upload validation\nvar mimeType=event.target.files[0].type;if(mimeType.match(/image\\/*/)==null){return;}// Image upload\nvar reader=new FileReader();reader.readAsDataURL(event.target.files[0]);reader.onload=function(_event){setUrl(reader.result);};};return data?React.createElement(Fragment,null,React.createElement(Breadcrumb,{title:\"Edit User\",parent:\"Contact\"}),React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(\"div\",{className:\"\"},React.createElement(\"div\",{className:\"authentication-box contact-profile-form\"},React.createElement(\"div\",{className:\"text-center\"},React.createElement(\"img\",{src:logo,alt:\"logo\"})),React.createElement(\"div\",{className:\"card mt-4\"},React.createElement(\"div\",{className:\"card-body\"},React.createElement(\"div\",{className:\"text-center user-profile\"},React.createElement(\"div\",{className:\"hovercard\"},React.createElement(\"div\",{className:\"contact-profile\"},React.createElement(\"img\",{className:\"rounded-circle img-100\",src:url?url:userDemoPic,alt:\"\"}),React.createElement(\"div\",{className:\"icon-wrapper\"},React.createElement(\"i\",{className:\"icofont icofont-pencil-alt-5\"},React.createElement(\"input\",{className:\"upload\",type:\"file\",onChange:function onChange(e){return readUrl(e);}})))))),React.createElement(\"form\",{className:\"theme-form\",onSubmit:handleSubmit(onSubmit)},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"col-form-label pt-0\"},\"Name\"),React.createElement(\"input\",{className:\"form-control\",type:\"text\",name:\"name\",defaultValue:data.name,ref:register({required:true})}),errors.name&&'First name is required'),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"col-form-label\"},\"Surname\"),React.createElement(\"input\",{className:\"form-control\",type:\"text\",name:\"surname\",defaultValue:data.surname,ref:register({required:true})}),errors.surname&&'Last name is required'),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"col-form-label\"},\"Mobile\"),React.createElement(\"input\",{className:\"form-control\",type:\"number\",name:\"mobile\",defaultValue:data.mobile,ref:register({pattern:/\\d+/,minlength:0,maxlength:9})}),errors.mobile&&'Please enter number max 9 digit'),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{className:\"col-form-label\"},\"Age\"),React.createElement(\"input\",{className:\"form-control\",type:\"number\",name:\"age\",defaultValue:data.age,ref:register({required:true,pattern:/\\d+/,min:18,max:70})}),errors.age&&'Please enter age between 18 to 70 year.'),React.createElement(\"div\",{className:\"form-group form-row mt-3 mb-0\"},React.createElement(\"button\",{className:\"btn btn-primary mr-2\",type:\"submit\"},\" Submit\"),React.createElement(\"button\",{className:\"btn btn-primary\",type:\"button\",\"data-original-title\":\"btn btn-info-gradien\",title:\"\",onClick:renderContact},\"Cancel\"))))))))):'';};export default NewUser;","map":{"version":3,"sources":["/Volumes/Terry HD/workspace/projects_reactjs/admin/endless-app/src/components/applications/contact-app/edit-user.js"],"names":["React","Fragment","useState","useEffect","Breadcrumb","logo","userDemoPic","useForm","editUser","firebase","NewUser","props","url","setUrl","register","handleSubmit","errors","db","firestore","data","setData","userId","setUserId","id","match","params","isSubscribed","collection","doc","onSnapshot","user","avatar","onSubmit","history","push","showMessages","renderContact","readUrl","event","target","files","length","mimeType","type","reader","FileReader","readAsDataURL","onload","_event","result","e","name","required","surname","mobile","pattern","minlength","maxlength","age","min","max"],"mappings":"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","sourcesContent":["import React, { Fragment, useState ,useEffect} from 'react';\nimport Breadcrumb from '../../common/breadcrumb';\nimport logo from '../../../assets/images/endless-logo.png';\nimport userDemoPic from '../../../assets/images/user/user.png';\nimport useForm from 'react-hook-form';\nimport { editUser } from '../../../services/contact.service';\nimport firebase from '../../../data/base';\n\nconst NewUser = (props) => {\n    const [url, setUrl] = useState();\n    const { register, handleSubmit, errors } = useForm(); // initialise the hook\n    const db = firebase.firestore();\n    const [data, setData] = useState();\n    const [userId, setUserId] = useState();\n    const id = props.match.params.id;\n\n    useEffect(() => {\n        \n        setUserId(id);\n        const isSubscribed = db.collection(\"contactApp\").doc(id)\n                .onSnapshot(function(doc) {\n                    const user = doc.data();\n                    setData(user);\n                    setUrl(user.avatar)\n                });\n        return () => isSubscribed();\n    },[db , id]);\n\n    const onSubmit = data => {\n        if (data !== '') {\n            editUser(data, url ,userId);\n            props.history.push('/contact-app/contact');\n        } else {\n            errors.showMessages();\n        }\n    };\n\n    const renderContact = () => {\n        props.history.push('/contact-app/contact');\n    }\n\n    const readUrl = (event) => {\n        if (event.target.files.length === 0)\n            return;\n        //Image upload validation\n        var mimeType = event.target.files[0].type;\n\n        if (mimeType.match(/image\\/*/) == null) {\n            return;\n        }\n        // Image upload\n        var reader = new FileReader();\n        reader.readAsDataURL(event.target.files[0]);\n        reader.onload = (_event) => {\n            setUrl(reader.result)\n        }   \n    }\n    return (\n        data?\n        <Fragment>\n            <Breadcrumb title=\"Edit User\" parent=\"Contact\" />\n            <div className=\"container-fluid\">\n                <div className=\"\">\n                    <div className=\"authentication-box contact-profile-form\">\n                        <div className=\"text-center\">\n                            <img src={logo} alt=\"logo\" /></div>\n                        <div className=\"card mt-4\">\n                            <div className=\"card-body\">\n                                <div className=\"text-center user-profile\">\n                                    <div className=\"hovercard\">\n                                        <div className=\"contact-profile\">\n                                            <img className=\"rounded-circle img-100\" src={url ? url : userDemoPic} alt=\"\" />\n                                            <div className=\"icon-wrapper\">\n                                                <i className=\"icofont icofont-pencil-alt-5\">\n                                                    <input className=\"upload\" type=\"file\" onChange={(e) => readUrl(e)} />\n                                                </i>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <form className=\"theme-form\" onSubmit={handleSubmit(onSubmit)}>\n                                    <div className=\"form-group\">\n                                        <label className=\"col-form-label pt-0\">Name</label>\n                                        <input className=\"form-control\" type=\"text\" name=\"name\" defaultValue={data.name} ref={register({ required: true })} />\n                                        {errors.name && 'First name is required'}\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label className=\"col-form-label\">Surname</label>\n                                        <input className=\"form-control\" type=\"text\" name=\"surname\" defaultValue={data.surname} ref={register({ required: true })} />\n                                        {errors.surname && 'Last name is required'}\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label className=\"col-form-label\">Mobile</label>\n                                        <input className=\"form-control\" type=\"number\" name=\"mobile\" defaultValue={data.mobile} ref={register({ pattern: /\\d+/, minlength: 0, maxlength: 9 })} />\n                                        {errors.mobile && 'Please enter number max 9 digit'}\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label className=\"col-form-label\">Age</label>\n                                        <input className=\"form-control\" type=\"number\" name=\"age\" defaultValue={data.age} ref={register({ required: true, pattern: /\\d+/, min: 18, max: 70 })} />\n                                        {errors.age && 'Please enter age between 18 to 70 year.'}\n                                    </div>\n                                    <div className=\"form-group form-row mt-3 mb-0\">\n                                        <button className=\"btn btn-primary mr-2\" type=\"submit\"> Submit\n                                        </button>\n                                        <button className=\"btn btn-primary\" type=\"button\" data-original-title=\"btn btn-info-gradien\" title=\"\" onClick={renderContact}>\n                                            Cancel\n                                        </button>\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </Fragment>\n    :''\n    );\n};\n\nexport default NewUser;"]},"metadata":{},"sourceType":"module"}